<script src="/js/list.min.js"></script>
<script>
  var searchInput = document.querySelector('#icons-body input#search')
  var filter = new URLSearchParams(window.location.search).get('filter')
  var exampleList = new List('icons-body', {
    valueNames: ['name', { data: ['tags', 'categories'] }]
  })
  if (filter !== null) {
    searchInput.value = filter
    exampleList.search(filter)
  }
  exampleList.on('searchComplete', function () {
    var searchTerm = searchInput.value
    var newUrl = new URL(location)
    if (searchTerm.length > 0) {
      newUrl.searchParams.set('filter', searchTerm)
    } else {
      newUrl.searchParams.delete('filter')
    }
    history.replaceState(null, null, newUrl)
  });
</script>
